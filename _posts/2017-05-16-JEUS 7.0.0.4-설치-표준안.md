---
layout: post
category : lessons
tagline: "Supporting tagline"
tags : [WEBTOB, JEUS, 설치]
---
{% include JB/setup %}

#JEUS 7.0.0.4-설치-표준안

##1. 설치시 고려사항

###1.1. 설치 위치
고객의 요청에 따라 설치위치를 지정하며 요청이 없을시는 계정에 JEUS7 폴더를 만들고 설치 진행	
```
/SW/jeus7 
/SW/webtob4
/home/tmax/jeus7
```

###1.2. 설치버전
최신 Fix 버전 + 필수 패치
```
JEUS : JEUS 7.0.0.4
WebtoB : WebtoB 4.1.9.1
```

###1.3. 도메인 이름	
고객과의 협의 하에 정하며 요청이 없을시는 
```
hostname 또는 업무명으로 지정	
jeus_hostname
jeus_업무명
```

###1.4. 로그위치
로그를 위한 파일시스템 
```
/logs/jeus7, /logs/webtob
```

파일 시스템이 없다면 $JEUS_HOME에 logs 폴더 생성
```
/logs/jeus7, /logs/webtob4
$JEUS_HOME/logs
```

##2. 환경변수(.profile) 및 Script

###2.1. 공통
profile
```
EDITOR=vi
export EDITOR
set -o vi
export PS1="[\$LOGNAME@\`hostname\`:\$PWD]$ "
export JAVA_HOME=/usr/java
export PATH=$JAVA_HOME/bin:$PATH
```


###2.2. WebtoB
```
export WEBTOBDIR=/SW/webtob
export PATH="${WEBTOBDIR}/bin:${PATH}"
export LD_LIBRARY_PATH="${WEBTOBDIR}/lib:${LD_LIBRARY_PATH}"
######## WebtoB Alias #####################
alias whome='cd ${WEBTOBDIR}'
alias wcfg='cd ${WEBTOBDIR}/config'
alias wbin='cd ${WEBTOBDIR}/bin'
alias wlog='cd ${WEBTOBDIR}/log'
```

###2.3. JEUS
```
export JEUS_HOME=/SW/jeus7
export JEUS_LOG_HOME=${JEUS_HOME}/logs
export PATH="${PATH}:${JEUS_HOME}/bin:${JEUS_HOME}/webserver/bin:${JEUS_HOME}/lib/system"
########## JEUS7 DomainAdminServer Set  ##############
export DOMAIN_NAME=jeus_domain
export DAS_HOSTNAME=DAS HOST NAME
export DAS_PORT=9736
export DAS_URL=${DAS_HOSTNAME}:${DAS_PORT}
export NODE_MANAGER_PORT=NODE MANAGER PORT
export ENCODE_FILE=${JEUS_HOME}/bin/jeusEncode
########## JEUS  Alias #################
alias jhome='cd ${JEUS_HOME}'
alias jcfg='cd ${JEUS_HOME}/domains/${DOMAIN_NAME}/config'
alias jbin='cd ${JEUS_HOME}/bin'
alias jlog='cd ${JEUS_LOG_HOME}'
```

###2.4. Script 위치 
     스크립트는 $JEUS_HOME/bin 폴더에 생성하고 alias로 기동/종료 등록은 하지 않는 방법으로 진행

###2.5. Domain Script
```
-  dsboot
     startDomainAdminServer -domain $DOMAIN_NAME -server adminServer -f $ENCODE_FILE
-  dsdown  
     jeusadmin –host $DAS_URL –domain $DOMAIN_NAME –f $ENCODE_FILE local-shutdown
-  dsa
     jeusadmin –host $DAS_URL –domain $DOMAIN_NAME –f $ENCODE_FILE
```

###2.6. NodeManager Script
```
-  nmboot
     nohup startNodeManager > $JEUS_LOG_HOME/nodeManager/nm.log &
-  nmdown
     stopNodeManager –host `hostname` -port $NODE_MANAGER_PORT
```

###2.7. Managed Server(MS) Script
```
-  msboot_서버명(예 : msboot_server1)
     startManagedServer –dasurl $DAS_URL –domain $DOMAIN_NAME –server 서버명 –f $ENCODE_FILE
- msdown_서버명(예 : msdown_server1)
     jeusadmin –host `hostname`:MS포트 –domain $DOMAIN_NAME –f $ENCODE_FILE local-shutdown 
```


###2.8. All down boot Script
script를 활용한 boot, down
```
- jdown
msdown_서버명1; msdown_서버명1;….;dsdown;nmdown

- jboot
nmboot;dsboot;msboot_서버명1;msboot_서버명2;….;
```

*jdown  / jboot 안에 내용은 자유



###2.9. JEUS ID/PW 암호화

jeusEncode 파일( $JEUS_HOME/bin/jeusEncode)
JEUS 7의 스크립트의 ID / Password 는 항상 암호화 방식으로 처리
####가) jeusEncode 파일 내용
```
---------------------------------------------------------------------------------------------------------------------------------
jeus_domain:adminServer mzuu+D57a1jL05l1SDFEY/uIO9XvHIMV4rlpWq/8WuylaQLDHJgLgN7dfCLL88kR
jeus_domain:server1 mzuu+D57a1jL05l1SDFEY/uIO9XvHIMV4rlpWq/8WuylaQLDHJgLgN7dfCLL88kR
localhost:9736 mzuu+D57a1jL05l1SDFEY/uIO9XvHIMV4rlpWq/8WuylaQLDHJgLgN7dfCLL88kR
localhost:9801 mzuu+D57a1jL05l1SDFEY/uIO9XvHIMV4rlpWq/8WuylaQLDHJgLgN7dfCLL88kR
---------------------------------------------------------------------------------------------------------------------------------
```

위의 jeusEncode 값은 아래와 같은 규칙으로 생성합니다. 
```
[domain 이름]:[Server 이름][암호화된 ID:Password 문자열]
```

####나) JEUS encryption 방법
```
$JEUS_HOME/bin/encryption 실행 
encryption 암호화방식 id:password 
예) encryption AES administrator:jeusadmin 
   encryption AES ‘wasadm:votmdnjem1!’     특수문자 입력시 ‘ ‘  안에 id:password 입력해서 진행
```


## 3. NodeManager 로그 설정

jeusnm.xml에 로그경로 추가($JEUS_HOME/nodemanager/jeusnm.xml)

```
<logFileName>/logs/jeus/nodeManager/JeusNodeManager.log</logFileName>
```

##4. Launcher 로그 설정
jeus.properties에 JAVA_ARGS에 추가함 –Djeus.launcher.log.home=/logs/jeus
```
예) jeus.properties 
JAVA_ARGS=“-Djeus.launcher.log.home=/logs/jeus”
```